package it.unibo.roguekong.model.entity.impl.powerup;

import it.unibo.roguekong.model.entity.PowerUp;
import it.unibo.roguekong.model.entity.impl.PlayerImpl;

/**
 * Gives player the ability to not be hit while the effect is on
 */
public class Invulnerability implements PowerUp {
    private final String name;
    private final String description;

    public Invulnerability(){
        this.name = "Invulnerability";
        this.description = "Grants player invulnerability for some time.";
    }

    /**
     * applyEffect of Invulnerabilty power up will create a new Thread, making it sleep
     * independently of the main gameloop Thread, then removes the effect on the player
     * @param player is an instance of the player on which the effect will be applied
     */
    @Override
    public void applyEffect(PlayerImpl player){
        player.setInvulnerability(true);

        /*
         * Thread takes a runnable as an input, and executes it
         */
        new Thread(() -> {
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            removeEffect(player);
        }).start();
    }

    public static void removeEffect(PlayerImpl player){
        player.setInvulnerability(false);
    }

    @Override
    public String getName() {
        return this.name;
    }

    @Override
    public String getDescription() {
        return this.description;
    }
}
